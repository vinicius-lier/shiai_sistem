{% extends 'atletas/base.html' %}

{% block title %}Dashboard - Relat√≥rios{% endblock %}

{% block extra_css %}
<style>
    .dashboard-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 20px;
        margin: 20px 0;
    }
    .stat-card {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 25px;
        border-radius: 10px;
        box-shadow: 0 5px 15px rgba(0,0,0,0.2);
    }
    .stat-card h3 {
        margin: 0 0 15px 0;
        font-size: 18px;
        opacity: 0.9;
    }
    .stat-card .number {
        font-size: 42px;
        font-weight: bold;
        margin: 10px 0;
    }
    .stat-card.ouro {
        background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
        color: #333;
    }
    .stat-card.prata {
        background: linear-gradient(135deg, #C0C0C0 0%, #808080 100%);
        color: white;
    }
    .stat-card.bronze {
        background: linear-gradient(135deg, #CD7F32 0%, #8B4513 100%);
        color: white;
    }
    .table-container {
        background: white;
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        margin: 20px 0;
    }
    .table-container h2 {
        margin-top: 0;
        color: #333;
        border-bottom: 2px solid #667eea;
        padding-bottom: 10px;
    }
    .medal-chart {
        display: flex;
        gap: 5px;
        align-items: center;
    }
    .medal-icon {
        font-size: 20px;
        margin-right: 5px;
    }
    .progress-bar {
        background: #f0f0f0;
        border-radius: 10px;
        height: 25px;
        margin: 5px 0;
        overflow: hidden;
    }
    .progress-fill {
        height: 100%;
        background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-weight: bold;
        font-size: 12px;
        transition: width 0.3s;
    }
</style>
{% endblock %}

{% block content %}
<h1>üìä Dashboard - Relat√≥rios</h1>

<div class="dashboard-grid">
    <div class="stat-card">
        <h3>Total de Atletas</h3>
        <div class="number">{{ total_atletas }}</div>
        <small>Atletas cadastrados no sistema</small>
    </div>
    
    <div class="stat-card">
        <h3>Atletas OK</h3>
        <div class="number">{{ total_atletas_ok }}</div>
        <small>Atletas aptos para competir</small>
    </div>
    
    <div class="stat-card">
        <h3>Festival</h3>
        <div class="number">{{ total_festival }}</div>
        <small>Atletas do Festival (3-6 anos)</small>
    </div>
</div>

<!-- Atletas por Classe -->
<div class="table-container">
    <h2>üìà Atletas por Classe</h2>
    <table>
        <thead>
            <tr>
                <th>Classe</th>
                <th>Total de Atletas</th>
                <th>Percentual</th>
            </tr>
        </thead>
        <tbody>
            {% for item in atletas_por_classe %}
            <tr>
                <td><strong>{{ item.classe }}</strong></td>
                <td>{{ item.total }}</td>
                <td>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: {% widthratio item.total total_atletas 100 %}%;">
                            {% widthratio item.total total_atletas 100 %}%
                        </div>
                    </div>
                </td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="3" style="text-align: center;">Nenhum atleta cadastrado</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<!-- Atletas por Academia -->
<div class="table-container">
    <h2>üè´ Atletas por Academia</h2>
    <table>
        <thead>
            <tr>
                <th>Academia</th>
                <th>Total de Atletas</th>
                <th>Percentual</th>
            </tr>
        </thead>
        <tbody>
            {% for item in atletas_por_academia %}
            <tr>
                <td><strong>{{ item.academia__nome }}</strong></td>
                <td>{{ item.total }}</td>
                <td>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: {% widthratio item.total total_atletas 100 %}%;">
                            {% widthratio item.total total_atletas 100 %}%
                        </div>
                    </div>
                </td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="3" style="text-align: center;">Nenhum atleta cadastrado</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<!-- Medalhas por Academia -->
<div class="table-container">
    <h2>üèÖ Medalhas por Academia</h2>
    <table>
        <thead>
            <tr>
                <th>Academia</th>
                <th>ü•á Ouro</th>
                <th>ü•à Prata</th>
                <th>ü•â Bronze</th>
                <th>Total de Medalhas</th>
            </tr>
        </thead>
        <tbody>
            {% for item in medalhas_por_academia %}
            <tr>
                <td><strong>{{ item.academia.nome }}</strong></td>
                <td>
                    {% if item.ouro > 0 %}
                        <span class="medal-chart">
                            <span class="medal-icon">ü•á</span>
                            <strong>{{ item.ouro }}</strong>
                        </span>
                    {% else %}
                        <span style="color: #999;">0</span>
                    {% endif %}
                </td>
                <td>
                    {% if item.prata > 0 %}
                        <span class="medal-chart">
                            <span class="medal-icon">ü•à</span>
                            <strong>{{ item.prata }}</strong>
                        </span>
                    {% else %}
                        <span style="color: #999;">0</span>
                    {% endif %}
                </td>
                <td>
                    {% if item.bronze > 0 %}
                        <span class="medal-chart">
                            <span class="medal-icon">ü•â</span>
                            <strong>{{ item.bronze }}</strong>
                        </span>
                    {% else %}
                        <span style="color: #999;">0</span>
                    {% endif %}
                </td>
                <td>
                    <strong style="font-size: 18px;">{{ item.total_medalhas }}</strong>
                </td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="5" style="text-align: center;">Nenhuma medalha registrada ainda</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<!-- Resumo de Medalhas -->
<div class="dashboard-grid" style="margin-top: 30px;">
    <div class="stat-card ouro">
        <h3>ü•á Total de Ouros</h3>
        <div class="number">{{ total_ouros }}</div>
        <small>Medalhas de ouro conquistadas</small>
    </div>
    
    <div class="stat-card prata">
        <h3>ü•à Total de Pratas</h3>
        <div class="number">{{ total_pratas }}</div>
        <small>Medalhas de prata conquistadas</small>
    </div>
    
    <div class="stat-card bronze">
        <h3>ü•â Total de Bronzes</h3>
        <div class="number">{{ total_bronzes }}</div>
        <small>Medalhas de bronze conquistadas</small>
    </div>
</div>

<a href="{% url 'index' %}" class="btn">Voltar para In√≠cio</a>
<a href="{% url 'ranking_academias' %}" class="btn">Ver Ranking Completo</a>
{% endblock %}

