{% extends 'atletas/layouts/base_operational.html' %}
{% load static %}

{% block title %}{% if is_edit %}Editar Organizacao{% else %}Nova Organizacao{% endif %} - SHIAI SISTEM{% endblock %}

{% block content %}
<div class="page-header">
    <h1 class="page-title">{% if is_edit %}Editar Organizacao{% else %}Nova Organizacao{% endif %}</h1>
    <p class="page-description">Gerencie os dados basicos da organizacao.</p>
</div>

<div class="card">
    <div class="card-header">
        <h3 class="card-title">Dados da Organizacao</h3>
    </div>
    <div class="card-body">
        <form method="post" enctype="multipart/form-data">
            {% csrf_token %}
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: var(--spacing-6);">
                <div class="form-group">
                    <label class="form-label" for="nome">
                        Nome
                        <span style="color: var(--color-danger);">*</span>
                    </label>
                    <input type="text" id="nome" name="nome" class="form-input" required value="{{ organizacao.nome|default_if_none:'' }}" placeholder="Nome da organizacao">
                </div>

                <div class="form-group">
                    <label class="form-label" for="email">
                        Email
                        <small style="color: var(--color-gray-500); font-weight: normal;">(opcional)</small>
                    </label>
                    <input type="email" id="email" name="email" class="form-input" value="{{ organizacao.email|default_if_none:'' }}" placeholder="contato@organizacao.com">
                </div>

                <div class="form-group">
                    <label class="form-label" for="telefone">
                        Telefone
                        <small style="color: var(--color-gray-500); font-weight: normal;">(opcional)</small>
                    </label>
                    <input type="text" id="telefone" name="telefone" class="form-input" value="{{ organizacao.telefone|default_if_none:'' }}" placeholder="(11) 90000-0000">
                </div>

                <div class="form-group">
                    <label class="form-label" for="slug">
                        Slug
                        <small style="color: var(--color-gray-500); font-weight: normal;">(opcional)</small>
                    </label>
                    <input type="text" id="slug" name="slug" class="form-input" value="{{ organizacao.slug|default_if_none:'' }}" placeholder="ex: minha-organizacao">
                    <small style="display: block; margin-top: var(--spacing-1); color: var(--color-gray-500); font-size: var(--font-size-xs);">
                        Se vazio, o slug sera gerado automaticamente.
                    </small>
                </div>

                <div class="form-group">
                    <label class="form-label" for="logo">
                        Logo
                        <small style="color: var(--color-gray-500); font-weight: normal;">(opcional)</small>
                    </label>
                    <input type="file" id="logo" name="logo" class="form-input" accept=".jpg,.jpeg,.png,.webp">
                    {% if organizacao and organizacao.logo %}
                    <small style="display: block; margin-top: var(--spacing-2);">
                        <a href="{{ organizacao.logo.url }}" target="_blank">Ver logo atual</a>
                    </small>
                    {% endif %}
                </div>

                <div class="form-group" style="display:flex; align-items:center; gap:10px; margin-top: 28px;">
                    <input type="checkbox" id="ativo" name="ativo" value="1" {% if organizacao %}{% if organizacao.ativo %}checked{% endif %}{% else %}checked{% endif %}>
                    <label class="form-label" for="ativo" style="margin:0;">Organizacao ativa</label>
                </div>
            </div>

            <div class="form-actions">
                <a href="{% url 'painel_organizacoes' %}" class="btn btn-secondary">Cancelar</a>
                <button type="submit" class="btn btn-primary">
                    {% if is_edit %}Salvar Alteracoes{% else %}Criar Organizacao{% endif %}
                </button>
            </div>
        </form>
    </div>
</div>
{% endblock %}
