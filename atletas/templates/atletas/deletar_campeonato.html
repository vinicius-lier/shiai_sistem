{% extends 'atletas/base.html' %}
{% load static %}

{% block title %}Excluir Campeonato - Sistema de Gestão de Competições de Judô{% endblock %}

{% block content %}
<div class="page-header">
    <h1 class="page-title">Excluir Campeonato</h1>
    <p class="page-description">Confirme a exclusão do campeonato</p>
</div>

<div class="card">
    <div class="card-header">
        <h3 class="card-title">⚠️ Atenção: Esta ação não pode ser desfeita!</h3>
    </div>
    <div class="card-body">
        <div style="margin-bottom: var(--spacing-6);">
            <p style="font-size: var(--font-size-lg); color: var(--color-gray-900); margin-bottom: var(--spacing-4);">
                Você está prestes a excluir o campeonato:
            </p>
            <div style="padding: var(--spacing-4); background: var(--color-gray-50); border-radius: var(--border-radius-md); margin-bottom: var(--spacing-4);">
                <h2 style="margin: 0; color: var(--color-primary); font-size: var(--font-size-xl);">{{ campeonato.nome }}</h2>
                {% if campeonato.data_competicao %}
                <p style="margin: var(--spacing-2) 0 0 0; color: var(--color-gray-600);">
                    Data da Competição: {{ campeonato.data_competicao|date:"d/m/Y" }}
                </p>
                {% endif %}
            </div>
        </div>

        {% if total_inscricoes > 0 or total_chaves > 0 or campeonato.ativo %}
        <div style="padding: var(--spacing-4); background: var(--color-danger-light); border-left: 4px solid var(--color-danger); border-radius: var(--border-radius-md); margin-bottom: var(--spacing-4);">
            <h3 style="margin: 0 0 var(--spacing-2) 0; color: var(--color-danger); font-size: var(--font-size-lg);">
                ⚠️ Não é possível excluir este campeonato
            </h3>
            <ul style="margin: var(--spacing-2) 0 0 0; padding-left: var(--spacing-4); color: var(--color-gray-700);">
                {% if campeonato.ativo %}
                <li>O campeonato está <strong>ativo</strong>. Desative-o primeiro.</li>
                {% endif %}
                {% if total_inscricoes > 0 %}
                <li>O campeonato possui <strong>{{ total_inscricoes }} inscrição(ões)</strong>. Remova as inscrições primeiro.</li>
                {% endif %}
                {% if total_chaves > 0 %}
                <li>O campeonato possui <strong>{{ total_chaves }} chave(s) gerada(s)</strong>. Remova as chaves primeiro.</li>
                {% endif %}
            </ul>
        </div>
        {% else %}
        <div style="padding: var(--spacing-4); background: var(--color-warning-light); border-left: 4px solid var(--color-warning); border-radius: var(--border-radius-md); margin-bottom: var(--spacing-4);">
            <h3 style="margin: 0 0 var(--spacing-2) 0; color: var(--color-warning); font-size: var(--font-size-lg);">
                ⚠️ Informações sobre a exclusão
            </h3>
            <ul style="margin: var(--spacing-2) 0 0 0; padding-left: var(--spacing-4); color: var(--color-gray-700);">
                <li>Serão excluídos <strong>{{ total_academias }} vínculo(s) com academias</strong></li>
                <li>Serão excluídas todas as <strong>credenciais temporárias</strong> relacionadas</li>
                <li>Esta ação <strong>não pode ser desfeita</strong></li>
            </ul>
        </div>
        {% endif %}

        <div style="display: flex; gap: var(--spacing-3); margin-top: var(--spacing-6);">
            <a href="{% url 'lista_campeonatos' %}" class="btn btn-secondary">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="width: 16px; height: 16px;"><path d="M19 12H5M12 19l-7-7 7-7"></path></svg>
                Cancelar
            </a>
            {% if not total_inscricoes and not total_chaves and not campeonato.ativo %}
            <form method="POST" style="display: inline;">
                {% csrf_token %}
                <button type="submit" class="btn btn-danger" onclick="return confirm('Tem CERTEZA ABSOLUTA que deseja excluir o campeonato {{ campeonato.nome }}? Esta ação NÃO PODE ser desfeita!');">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="width: 16px; height: 16px;"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>
                    Excluir Campeonato
                </button>
            </form>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}

