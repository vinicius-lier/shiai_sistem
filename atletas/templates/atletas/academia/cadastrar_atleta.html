{% extends 'atletas/academia/base_academia.html' %}

{% block title %}Cadastrar Atleta - {{ academia.nome }}{% endblock %}

{% block extra_css %}
<style>
    .btn-back {
        display: inline-flex;
        align-items: center;
        gap: var(--spacing-2);
        color: var(--color-primary);
        text-decoration: none;
        font-size: var(--font-size-sm);
        margin-bottom: var(--spacing-4);
        font-weight: 500;
    }

    .btn-back:hover {
        color: var(--color-primary-hover);
    }

    .form-grid {
        display: grid;
        grid-template-columns: 1fr;
        gap: var(--spacing-6);
    }

    @media (min-width: 768px) {
        .form-grid {
            grid-template-columns: repeat(2, 1fr);
        }
    }

    .form-group-full {
        grid-column: 1 / -1;
    }

    .checkbox-group {
        display: flex;
        align-items: center;
        gap: var(--spacing-2);
        padding: var(--spacing-3);
        background: var(--color-gray-50);
        border-radius: var(--border-radius-md);
        border: 1px solid var(--color-gray-200);
    }

    .checkbox-group input[type="checkbox"] {
        width: 20px;
        height: 20px;
        cursor: pointer;
    }

    .checkbox-group label {
        margin: 0;
        cursor: pointer;
        font-weight: 500;
    }

    .form-help {
        display: block;
        margin-top: var(--spacing-1);
        color: var(--color-gray-500);
        font-size: var(--font-size-xs);
    }

    .required-mark {
        color: var(--color-danger);
    }
</style>
{% endblock %}

{% block content %}
<div class="page-header">
    {% if campeonato_id %}
    <a href="{% url 'academia_inscrever_atletas' campeonato_id %}" class="btn-back">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="width: 16px; height: 16px;">
            <polyline points="15 18 9 12 15 6"></polyline>
        </svg>
        Voltar para inscrições
    </a>
    {% else %}
    <a href="{% url 'academia_lista_atletas' %}" class="btn-back">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="width: 16px; height: 16px;">
            <polyline points="15 18 9 12 15 6"></polyline>
        </svg>
        Voltar para atletas
    </a>
    {% endif %}
    
    <h1 class="page-title">Cadastrar Novo Atleta</h1>
    <p class="page-description">{{ academia.nome }}</p>
</div>

<div class="card">
    <div class="card-body">
        <form method="post" enctype="multipart/form-data">
            {% csrf_token %}
            
            <input type="hidden" name="academia" value="{{ academia.id }}">
            
            <div class="form-grid">
                <div class="form-group form-group-full">
                    <label class="form-label" for="nome">
                        Nome completo
                        <span class="required-mark">*</span>
                    </label>
                    <input type="text" id="nome" name="nome" class="form-input" required placeholder="Digite o nome completo do atleta">
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="data_nascimento">
                        Data de Nascimento
                        <span class="required-mark">*</span>
                    </label>
                    <input type="date" id="data_nascimento" name="data_nascimento" class="form-input" required>
                    <span class="form-help">A classe será calculada automaticamente</span>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="sexo">
                        Sexo
                        <span class="required-mark">*</span>
                    </label>
                    <select id="sexo" name="sexo" class="form-select" required>
                        <option value="">Selecione</option>
                        <option value="M">Masculino</option>
                        <option value="F">Feminino</option>
                    </select>
                </div>
                
                <div class="form-group form-group-full">
                    <div class="checkbox-group">
                        <input type="checkbox" id="federado" name="federado" onchange="toggleZempo()">
                        <label for="federado">Atleta Federado</label>
                    </div>
                </div>
                
                <div class="form-group form-group-full" id="zempo-group" style="display: none;">
                    <label class="form-label" for="numero_zempo">
                        Número Zempo
                        <span class="required-mark">*</span>
                    </label>
                    <input type="text" id="numero_zempo" name="numero_zempo" class="form-input" placeholder="Digite o número Zempo">
                </div>
                
                <div class="form-group form-group-full">
                    <label class="form-label" for="documento_oficial">
                        Documento Oficial (JPG/PNG/PDF)
                        <span class="required-mark">*</span>
                    </label>
                    <input type="file" id="documento_oficial" name="documento_oficial" class="form-input" accept=".jpg,.jpeg,.png,.pdf" required>
                    <span class="form-help">Upload do documento de identificação do atleta</span>
                </div>
            </div>
            
            <div class="flex gap-3 mt-6" style="flex-wrap: wrap;">
                <button type="submit" class="btn btn-primary">Cadastrar Atleta</button>
                {% if campeonato_id %}
                <a href="{% url 'academia_inscrever_atletas' campeonato_id %}" class="btn btn-secondary" style="text-decoration: none;">Cancelar</a>
                {% else %}
                <a href="{% url 'academia_lista_atletas' %}" class="btn btn-secondary" style="text-decoration: none;">Cancelar</a>
                {% endif %}
            </div>
        </form>
    </div>
</div>

<script>
function toggleZempo() {
    const federado = document.getElementById('federado').checked;
    const zempoGroup = document.getElementById('zempo-group');
    const zempoInput = document.getElementById('numero_zempo');
    
    if (federado) {
        zempoGroup.style.display = 'block';
        zempoInput.required = true;
    } else {
        zempoGroup.style.display = 'none';
        zempoInput.required = false;
        zempoInput.value = '';
    }
}
</script>
{% endblock %}
