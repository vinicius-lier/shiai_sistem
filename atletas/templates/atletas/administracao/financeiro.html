{% extends 'atletas/administracao/base_admin.html' %}

{% block admin_page_title %}Financeiro{% endblock %}
{% block admin_page_description %}Entradas, saídas e acompanhamento de pagamentos no padrão do SHIAI{% endblock %}

{% block admin_content %}
<section class="section-spacing">
    <div class="stats-grid">
        <div class="stat-card">
            <div class="stat-card-header"><span class="stat-card-title">Entradas previstas</span></div>
            <div class="stat-card-value">R$ {{ ganho_previsto|floatformat:2 }}</div>
        </div>
        <div class="stat-card">
            <div class="stat-card-header"><span class="stat-card-title">Dinheiro em caixa</span></div>
            <div class="stat-card-value">R$ {{ dinheiro_caixa|floatformat:2 }}</div>
        </div>
        <div class="stat-card">
            <div class="stat-card-header"><span class="stat-card-title">Pagamentos pendentes</span></div>
            <div class="stat-card-value">R$ {{ pagamentos_pendentes|floatformat:2 }}</div>
        </div>
        <div class="stat-card">
            <div class="stat-card-header"><span class="stat-card-title">Total de despesas</span></div>
            <div class="stat-card-value">R$ {{ total_despesas|floatformat:2 }}</div>
        </div>
        <div class="stat-card">
            <div class="stat-card-header"><span class="stat-card-title">Bônus de professores</span></div>
            <div class="stat-card-value">R$ {{ total_bonus|floatformat:2 }}</div>
        </div>
        <div class="stat-card">
            <div class="stat-card-header"><span class="stat-card-title">Saldo final</span></div>
            <div class="stat-card-value">R$ {{ saldo_final|floatformat:2 }}</div>
        </div>
    </div>
</section>

<section class="card mt-8">
    <div class="card-header card-header-flex">
        <h2 class="card-title m-0">Despesas Recentes</h2>
        <a href="{% url 'administracao_despesas' %}" class="btn btn-secondary w-auto">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="width: 16px; height: 16px;">
                <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
            </svg>
            Despesas e Receitas
        </a>
    </div>
    <div class="card-body">
    {% if despesas %}
    <div class="table-container">
        <table class="table">
            <thead>
                <tr>
                    <th>Nome</th>
                    <th>Categoria</th>
                    <th>Valor</th>
                    <th>Status</th>
                    <th>Observação</th>
                </tr>
            </thead>
            <tbody>
                {% for despesa in despesas %}
                <tr>
                    <td>{{ despesa.nome }}</td>
                    <td>{{ despesa.get_categoria_display }}</td>
                    <td>R$ {{ despesa.valor|floatformat:2 }}</td>
                    <td>
                        <span class="badge {% if despesa.status == 'pago' %}badge-success{% else %}badge-warning{% endif %}">
                            {{ despesa.get_status_display }}
                        </span>
                    </td>
                    <td>{{ despesa.observacao|default:'—' }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% else %}
        <p class="text-gray-500 m-0">Nenhuma despesa cadastrada.</p>
    {% endif %}
    </div>
</section>
{% endblock %}

