{% load static %}

{% extends 'atletas/base.html' %}

<<<<<<< HEAD
{% block title %}M√©tricas - Sistema de Gest√£o de Competi√ß√µes de Jud√¥{% endblock %}

{% block content %}
<!-- Cabe√ßalho -->
<div class="page-header" style="margin-bottom: var(--spacing-8);">
    <div style="display: flex; align-items: center; gap: var(--spacing-4); margin-bottom: var(--spacing-2);">
        <div style="width: 56px; height: 56px; border-radius: var(--border-radius-lg); background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-secondary) 100%); display: flex; align-items: center; justify-content: center; box-shadow: var(--shadow-lg);">
            <svg viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="width: 32px; height: 32px;">
                <line x1="12" y1="20" x2="12" y2="10"></line>
                <line x1="18" y1="20" x2="18" y2="4"></line>
                <line x1="6" y1="20" x2="6" y2="16"></line>
            </svg>
        </div>
        <div style="flex: 1;">
            <h1 class="page-title">M√©tricas</h1>
            <p class="page-description">An√°lises e indicadores gerais do sistema</p>
        </div>
    </div>
</div>

{% if total_atletas == 0 %}
<!-- Estado Vazio -->
<div class="card">
    <div class="empty-state">
        <svg class="empty-state-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="12" y1="20" x2="12" y2="10"></line>
            <line x1="18" y1="20" x2="18" y2="4"></line>
            <line x1="6" y1="20" x2="6" y2="16"></line>
        </svg>
        <div class="empty-state-title">Nenhum dado dispon√≠vel ainda</div>
        <div class="empty-state-description">Cadastre atletas para ativar as m√©tricas do sistema</div>
        <a href="{% url 'cadastrar_atleta' %}" class="btn btn-primary" style="margin-top: var(--spacing-4);">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="width: 16px; height: 16px;"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
            Cadastrar Atleta
        </a>
    </div>
</div>
{% else %}
<!-- Indicadores Principais -->
<div class="stats-grid" style="margin-bottom: var(--spacing-8);">
    <div class="stat-card">
        <div class="stat-card-header">
            <span class="stat-card-title">Total de Atletas</span>
            <div class="stat-card-icon">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="width: 20px; height: 20px;">
                    <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                    <circle cx="9" cy="7" r="4"></circle>
                    <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                    <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                </svg>
            </div>
        </div>
        <div class="stat-card-value">{{ total_atletas }}</div>
        <div class="stat-card-change">Atletas cadastrados no sistema</div>
    </div>

    <div class="stat-card">
        <div class="stat-card-header">
            <span class="stat-card-title">Atletas OK</span>
            <div class="stat-card-icon">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="width: 20px; height: 20px;">
                    <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                    <polyline points="22 4 12 14.01 9 11.01"></polyline>
                </svg>
            </div>
        </div>
        <div class="stat-card-value">{{ total_atletas_ok }}</div>
        <div class="stat-card-change">Atletas aptos para competir</div>
    </div>
    
    <div class="stat-card">
        <div class="stat-card-header">
            <span class="stat-card-title">Festival</span>
            <div class="stat-card-icon">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="width: 20px; height: 20px;">
                    <path d="M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
                </svg>
            </div>
        </div>
        <div class="stat-card-value">{{ total_festival }}</div>
        <div class="stat-card-change">Atletas do Festival (3-6 anos)</div>
    </div>
    
    <div class="stat-card">
        <div class="stat-card-header">
            <span class="stat-card-title">Total de Medalhas</span>
            <div class="stat-card-icon">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="width: 20px; height: 20px;">
                    <circle cx="12" cy="8" r="7"></circle>
                    <polyline points="8.21 13.89 7 23 12 20 17 23 15.79 13.88"></polyline>
                </svg>
            </div>
        </div>
        <div class="stat-card-value">{{ total_ouros|add:total_pratas|add:total_bronzes }}</div>
        <div class="stat-card-change">
            ü•á {{ total_ouros }} ‚Ä¢ ü•à {{ total_pratas }} ‚Ä¢ ü•â {{ total_bronzes }}
        </div>
=======
{% block title %}Dashboard - Relat√≥rios{% endblock %}

{% block extra_css %}
<style>
    .dashboard-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 20px;
        margin: 20px 0;
    }
    .stat-card {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 25px;
        border-radius: 10px;
        box-shadow: 0 5px 15px rgba(0,0,0,0.2);
    }
    .stat-card h3 {
        margin: 0 0 15px 0;
        font-size: 18px;
        opacity: 0.9;
    }
    .stat-card .number {
        font-size: 42px;
        font-weight: bold;
        margin: 10px 0;
    }
    .stat-card.ouro {
        background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
        color: #333;
    }
    .stat-card.prata {
        background: linear-gradient(135deg, #C0C0C0 0%, #808080 100%);
        color: white;
    }
    .stat-card.bronze {
        background: linear-gradient(135deg, #CD7F32 0%, #8B4513 100%);
        color: white;
    }
    .table-container {
        background: white;
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        margin: 20px 0;
    }
    .table-container h2 {
        margin-top: 0;
        color: #333;
        border-bottom: 2px solid #667eea;
        padding-bottom: 10px;
    }
    .medal-chart {
        display: flex;
        gap: 5px;
        align-items: center;
    }
    .medal-icon {
        font-size: 20px;
        margin-right: 5px;
    }
    .progress-bar {
        background: #f0f0f0;
        border-radius: 10px;
        height: 25px;
        margin: 5px 0;
        overflow: hidden;
    }
    .progress-fill {
        height: 100%;
        background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-weight: bold;
        font-size: 12px;
        transition: width 0.3s;
    }
</style>
{% endblock %}

{% block content %}
<h1>üìä Dashboard - Relat√≥rios</h1>

<div class="dashboard-grid">
    <div class="stat-card">
        <h3>Total de Atletas</h3>
        <div class="number">{{ total_atletas }}</div>
        <small>Atletas cadastrados no sistema</small>
    </div>
    
    <div class="stat-card">
        <h3>Atletas OK</h3>
        <div class="number">{{ total_atletas_ok }}</div>
        <small>Atletas aptos para competir</small>
    </div>
    
    <div class="stat-card">
        <h3>Festival</h3>
        <div class="number">{{ total_festival }}</div>
        <small>Atletas do Festival (3-6 anos)</small>
>>>>>>> dd494c57289dd9cfb039519c18e2065bb3b48a17
    </div>
</div>

<!-- Atletas por Classe -->
<<<<<<< HEAD
{% if atletas_por_classe %}
<div class="card mb-6">
    <div class="card-header">
        <h3 class="card-title">Atletas por Classe</h3>
    </div>
    <div class="card-body" style="padding: 0;">
<div class="table-container">
            <table class="table">
        <thead>
            <tr>
                <th>Classe</th>
                        <th style="text-align: center;">Total</th>
                        <th style="text-align: right;">Percentual</th>
=======
<div class="table-container">
    <h2>üìà Atletas por Classe</h2>
    <table>
        <thead>
            <tr>
                <th>Classe</th>
                <th>Total de Atletas</th>
                <th>Percentual</th>
>>>>>>> dd494c57289dd9cfb039519c18e2065bb3b48a17
            </tr>
        </thead>
        <tbody>
            {% for item in atletas_por_classe %}
            <tr>
<<<<<<< HEAD
                        <td>
                            <span class="badge badge-success">{{ item.classe }}</span>
                        </td>
                        <td style="text-align: center;">
                            <span style="font-weight: 600; color: var(--color-gray-900);">{{ item.total }}</span>
                        </td>
                <td>
                            <div style="display: flex; align-items: center; gap: var(--spacing-3);">
                                <div style="flex: 1; height: 8px; background: var(--color-gray-200); border-radius: var(--border-radius-sm); overflow: hidden;">
                                    <div style="height: 100%; width: {% widthratio item.total total_atletas 100 %}%; background: linear-gradient(90deg, var(--color-primary) 0%, var(--color-secondary) 100%); transition: width var(--transition-base);"></div>
                                </div>
                                <span style="font-size: var(--font-size-sm); color: var(--color-gray-600); font-weight: 500; min-width: 45px; text-align: right;">
                            {% widthratio item.total total_atletas 100 %}%
                                </span>
                    </div>
                </td>
            </tr>
=======
                <td><strong>{{ item.classe }}</strong></td>
                <td>{{ item.total }}</td>
                <td>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: {% widthratio item.total total_atletas 100 %}%;">
                            {% widthratio item.total total_atletas 100 %}%
                        </div>
                    </div>
                </td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="3" style="text-align: center;">Nenhum atleta cadastrado</td>
            </tr>
>>>>>>> dd494c57289dd9cfb039519c18e2065bb3b48a17
            {% endfor %}
        </tbody>
    </table>
</div>
<<<<<<< HEAD
    </div>
</div>
{% endif %}

<!-- Atletas por Academia -->
{% if atletas_por_academia %}
<div class="card mb-6">
    <div class="card-header">
        <h3 class="card-title">Atletas por Academia</h3>
    </div>
    <div class="card-body" style="padding: 0;">
<div class="table-container">
            <table class="table">
        <thead>
            <tr>
                <th>Academia</th>
                        <th style="text-align: center;">Total</th>
                        <th style="text-align: right;">Percentual</th>
=======

<!-- Atletas por Academia -->
<div class="table-container">
    <h2>üè´ Atletas por Academia</h2>
    <table>
        <thead>
            <tr>
                <th>Academia</th>
                <th>Total de Atletas</th>
                <th>Percentual</th>
>>>>>>> dd494c57289dd9cfb039519c18e2065bb3b48a17
            </tr>
        </thead>
        <tbody>
            {% for item in atletas_por_academia %}
            <tr>
<<<<<<< HEAD
                        <td>
                            <div style="font-weight: 500; color: var(--color-gray-900);">{{ item.academia__nome }}</div>
                        </td>
                        <td style="text-align: center;">
                            <span style="font-weight: 600; color: var(--color-primary);">{{ item.total }}</span>
                        </td>
                <td>
                            <div style="display: flex; align-items: center; gap: var(--spacing-3);">
                                <div style="flex: 1; height: 8px; background: var(--color-gray-200); border-radius: var(--border-radius-sm); overflow: hidden;">
                                    <div style="height: 100%; width: {% widthratio item.total total_atletas 100 %}%; background: linear-gradient(90deg, var(--color-primary) 0%, var(--color-secondary) 100%); transition: width var(--transition-base);"></div>
                                </div>
                                <span style="font-size: var(--font-size-sm); color: var(--color-gray-600); font-weight: 500; min-width: 45px; text-align: right;">
                            {% widthratio item.total total_atletas 100 %}%
                                </span>
                    </div>
                </td>
            </tr>
=======
                <td><strong>{{ item.academia__nome }}</strong></td>
                <td>{{ item.total }}</td>
                <td>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: {% widthratio item.total total_atletas 100 %}%;">
                            {% widthratio item.total total_atletas 100 %}%
                        </div>
                    </div>
                </td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="3" style="text-align: center;">Nenhum atleta cadastrado</td>
            </tr>
>>>>>>> dd494c57289dd9cfb039519c18e2065bb3b48a17
            {% endfor %}
        </tbody>
    </table>
</div>
<<<<<<< HEAD
    </div>
</div>
{% endif %}

<!-- Medalhas por Academia -->
{% if medalhas_por_academia %}
<div class="card mb-6">
    <div class="card-header">
        <h3 class="card-title">Medalhas por Academia</h3>
    </div>
    <div class="card-body" style="padding: 0;">
<div class="table-container">
            <table class="table">
        <thead>
            <tr>
                <th>Academia</th>
                        <th style="text-align: center;">ü•á Ouro</th>
                        <th style="text-align: center;">ü•à Prata</th>
                        <th style="text-align: center;">ü•â Bronze</th>
                        <th style="text-align: right;">Total</th>
=======

<!-- Medalhas por Academia -->
<div class="table-container">
    <h2>üèÖ Medalhas por Academia</h2>
    <table>
        <thead>
            <tr>
                <th>Academia</th>
                <th>ü•á Ouro</th>
                <th>ü•à Prata</th>
                <th>ü•â Bronze</th>
                <th>Total de Medalhas</th>
>>>>>>> dd494c57289dd9cfb039519c18e2065bb3b48a17
            </tr>
        </thead>
        <tbody>
            {% for item in medalhas_por_academia %}
            <tr>
<<<<<<< HEAD
                        <td>
                            <div style="font-weight: 500; color: var(--color-gray-900);">{{ item.academia.nome }}</div>
                            {% if item.academia.cidade %}
                            <div style="font-size: var(--font-size-xs); color: var(--color-gray-500); margin-top: var(--spacing-1);">
                                {{ item.academia.cidade }}{% if item.academia.estado %}, {{ item.academia.estado }}{% endif %}
                            </div>
                            {% endif %}
                        </td>
                        <td style="text-align: center;">
                    {% if item.ouro > 0 %}
                                <span style="font-weight: 600; color: #D97706;">{{ item.ouro }}</span>
                    {% else %}
                                <span style="color: var(--color-gray-300);">-</span>
                    {% endif %}
                </td>
                        <td style="text-align: center;">
                    {% if item.prata > 0 %}
                                <span style="font-weight: 600; color: #6B7280;">{{ item.prata }}</span>
                    {% else %}
                                <span style="color: var(--color-gray-300);">-</span>
                    {% endif %}
                </td>
                        <td style="text-align: center;">
                    {% if item.bronze > 0 %}
                                <span style="font-weight: 600; color: #92400E;">{{ item.bronze }}</span>
                    {% else %}
                                <span style="color: var(--color-gray-300);">-</span>
                    {% endif %}
                </td>
                        <td style="text-align: right;">
                            <span style="font-weight: 600; color: var(--color-primary); font-size: var(--font-size-lg);">{{ item.total_medalhas }}</span>
                </td>
            </tr>
=======
                <td><strong>{{ item.academia.nome }}</strong></td>
                <td>
                    {% if item.ouro > 0 %}
                        <span class="medal-chart">
                            <span class="medal-icon">ü•á</span>
                            <strong>{{ item.ouro }}</strong>
                        </span>
                    {% else %}
                        <span style="color: #999;">0</span>
                    {% endif %}
                </td>
                <td>
                    {% if item.prata > 0 %}
                        <span class="medal-chart">
                            <span class="medal-icon">ü•à</span>
                            <strong>{{ item.prata }}</strong>
                        </span>
                    {% else %}
                        <span style="color: #999;">0</span>
                    {% endif %}
                </td>
                <td>
                    {% if item.bronze > 0 %}
                        <span class="medal-chart">
                            <span class="medal-icon">ü•â</span>
                            <strong>{{ item.bronze }}</strong>
                        </span>
                    {% else %}
                        <span style="color: #999;">0</span>
                    {% endif %}
                </td>
                <td>
                    <strong style="font-size: 18px;">{{ item.total_medalhas }}</strong>
                </td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="5" style="text-align: center;">Nenhuma medalha registrada ainda</td>
            </tr>
>>>>>>> dd494c57289dd9cfb039519c18e2065bb3b48a17
            {% endfor %}
        </tbody>
    </table>
</div>
<<<<<<< HEAD
    </div>
</div>
{% endif %}

<!-- Resumo de Medalhas -->
{% if total_ouros > 0 or total_pratas > 0 or total_bronzes > 0 %}
<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: var(--spacing-6); margin-bottom: var(--spacing-8);">
    <div class="card" style="background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%); border: none;">
        <div class="card-body" style="text-align: center; color: #744210;">
            <div style="font-size: 48px; margin-bottom: var(--spacing-2);">ü•á</div>
            <div style="font-size: var(--font-size-3xl); font-weight: 700; margin-bottom: var(--spacing-1);">{{ total_ouros }}</div>
            <div style="font-size: var(--font-size-sm); font-weight: 600; opacity: 0.8;">Total de Ouros</div>
        </div>
    </div>
    
    <div class="card" style="background: linear-gradient(135deg, #C0C0C0 0%, #A0A0A0 100%); border: none;">
        <div class="card-body" style="text-align: center; color: #4A4A4A;">
            <div style="font-size: 48px; margin-bottom: var(--spacing-2);">ü•à</div>
            <div style="font-size: var(--font-size-3xl); font-weight: 700; margin-bottom: var(--spacing-1);">{{ total_pratas }}</div>
            <div style="font-size: var(--font-size-sm); font-weight: 600; opacity: 0.8;">Total de Pratas</div>
        </div>
    </div>
    
    <div class="card" style="background: linear-gradient(135deg, #CD7F32 0%, #8B4513 100%); border: none;">
        <div class="card-body" style="text-align: center; color: white;">
            <div style="font-size: 48px; margin-bottom: var(--spacing-2);">ü•â</div>
            <div style="font-size: var(--font-size-3xl); font-weight: 700; margin-bottom: var(--spacing-1);">{{ total_bronzes }}</div>
            <div style="font-size: var(--font-size-sm); font-weight: 600; opacity: 0.9;">Total de Bronzes</div>
        </div>
    </div>
</div>
{% endif %}
{% endif %}
{% endblock %}
=======

<!-- Resumo de Medalhas -->
<div class="dashboard-grid" style="margin-top: 30px;">
    <div class="stat-card ouro">
        <h3>ü•á Total de Ouros</h3>
        <div class="number">{{ total_ouros }}</div>
        <small>Medalhas de ouro conquistadas</small>
    </div>
    
    <div class="stat-card prata">
        <h3>ü•à Total de Pratas</h3>
        <div class="number">{{ total_pratas }}</div>
        <small>Medalhas de prata conquistadas</small>
    </div>
    
    <div class="stat-card bronze">
        <h3>ü•â Total de Bronzes</h3>
        <div class="number">{{ total_bronzes }}</div>
        <small>Medalhas de bronze conquistadas</small>
    </div>
</div>

<a href="{% url 'index' %}" class="btn">Voltar para In√≠cio</a>
<a href="{% url 'ranking_academias' %}" class="btn">Ver Ranking Completo</a>
{% endblock %}

>>>>>>> dd494c57289dd9cfb039519c18e2065bb3b48a17
